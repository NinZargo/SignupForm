const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AccountSetup-CSNXvkwI.js","assets/vendor-CM_Zk0Sk.js","assets/EventList-B34eSMIV.js","assets/EventSignup-DOzZCGXq.js","assets/MySignups-B6NQDuDQ.js","assets/ResetPassword-fD5brx0Z.js","assets/AccessDenied-DRDU_P39.js","assets/AdminPage-1Vd9hze-.js","assets/ProtectedRoute-C52d-6Y4.js"])))=>i.map(i=>d[i]);
import{c as R,r as n,j as e,u as v,B as p,A as U,T as O,a as j,I as D,M as T,D as z,P as B,L as M,b as N,d as V,e as F,f as J,g as y,h as C,C as W,i as E,k as P,_ as g,H as q,l as $,m as G,R as H,n as h,o as Y}from"./vendor-CM_Zk0Sk.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function i(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(r){if(r.ep)return;r.ep=!0;const o=i(r);fetch(r.href,o)}})();const Z="https://jhhbluhsgqykccyivxei.supabase.co",K="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpoaGJsdWhzZ3F5a2NjeWl2eGVpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM1Mzk4MTQsImV4cCI6MjA2OTExNTgxNH0.msu84MPP98SnwIwpf1-JsW5DBDllcyKraONJp9TrQ68",x=R(Z,K),A=n.createContext();function Q({children:s}){const[t,i]=n.useState(null),[a,r]=n.useState(!0);n.useEffect(()=>{async function l(){const{data:{user:u}}=await x.auth.getUser();if(u){const{data:f}=await x.from("users").select("*").eq("id",u.id).single();i(f)}r(!1)}l()},[]);const o={profile:t,isAdmin:(t==null?void 0:t.is_admin)||!1,loading:a};return e.jsx(A.Provider,{value:o,children:!a&&s})}function X(){return n.useContext(A)}function b({children:s}){const t=v(),[i,a]=n.useState(!1),{isAdmin:r}=X(),o=()=>{a(!i)},l=["Events","MySignups"],u=r?[...l,"Admin"]:l,f=e.jsx(p,{onClick:o,sx:{textAlign:"center"},children:e.jsx(M,{children:u.map(c=>e.jsx(N,{disablePadding:!0,children:e.jsx(V,{sx:{textAlign:"center"},onClick:()=>t(`/${c.toLowerCase()}`),children:e.jsx(F,{primary:c})})},c))})});return e.jsxs(p,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh",width:"100vw",backgroundColor:"#f4f6f8",backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cg fill='%23dce4ec' fill-opacity='1'%3E%3Cpolygon fill-rule='evenodd' points='8 4 12 6 8 8 6 12 4 8 0 6 4 4 6 0 8 4'/%3E%3C/g%3E%3C/svg%3E")`},children:[e.jsx(U,{position:"static",sx:{bgcolor:"white",boxShadow:"none",borderBottom:"1px solid #ddd"},children:e.jsxs(O,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:{xs:"10px",sm:"10px 20px"}},children:[e.jsx(p,{component:"img",src:"https://assets.zyrosite.com/m5KbJakbLpivbpzd/ai-logo-A1aJq39wW9HGqzvO.svg",alt:"Brunel Sailing logo",sx:{height:"40px",cursor:"pointer"},onClick:()=>t("/")}),e.jsx(p,{sx:{display:{xs:"none",sm:"flex"},gap:2},children:u.map(c=>e.jsx(j,{sx:{color:"black",textTransform:"none"},onClick:()=>t(`/${c.toLowerCase()}`),children:c},c))}),e.jsx(D,{color:"inherit","aria-label":"open drawer",edge:"end",onClick:o,sx:{display:{sm:"none"},color:"black"},children:e.jsx(T,{})})]})}),e.jsx(z,{variant:"temporary",open:i,onClose:o,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",sm:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:"60%"}},children:f}),e.jsx(p,{component:"main",sx:{flexGrow:1,p:{xs:2,sm:3},width:"100%",display:"flex",justifyContent:"center"},children:e.jsx(B,{elevation:3,sx:{width:"100%",maxWidth:"1200px",backgroundColor:"white",borderRadius:2,p:3},children:s})})]})}const ee="kUIc5Moarxp1c0JtUnPVaATm3eVg3Y1aFGZVNN4L3ZY",te=async s=>{try{const t=await J.get("https://api.unsplash.com/photos/random",{params:{query:s,orientation:"landscape"},headers:{Authorization:`Client-ID ${ee}`}});return t.data&&t.data.urls?t.data.urls.regular:null}catch(t){return console.error("Error fetching image from Unsplash:",t),null}},se="/SignupForm/assets/BrunelSailingIcon-AP_PaV4P.jpeg";function re({photographerName:s,photographerUrl:t}){const i="Brunel_Sailing_Signups";return!s||!t?null:e.jsx(p,{sx:{position:"absolute",bottom:8,right:8,backgroundColor:"rgba(0, 0, 0, 0.4)",color:"white",padding:"2px 8px",borderRadius:1,fontSize:"0.75rem"},children:e.jsxs(y,{variant:"caption",children:["Photo by"," ",e.jsx(C,{href:`${t}?utm_source=${i}&utm_medium=referral`,target:"_blank",rel:"noopener noreferrer",color:"inherit",children:s})," ","on"," ",e.jsx(C,{href:`https://unsplash.com/?utm_source=${i}&utm_medium=referral`,target:"_blank",rel:"noopener noreferrer",color:"inherit",children:"Unsplash"})]})})}const ne=()=>{const[s,t]=n.useState("signin"),[i,a]=n.useState(""),[r,o]=n.useState(""),[l,u]=n.useState(null),[f,c]=n.useState(""),_=v(),[w,k]=n.useState({imageUrl:"",photographerName:"",photographerUrl:""});n.useEffect(()=>{async function m(){const d=await te("sailing race");d&&k(d)}m()},[]);const L=async m=>{if(m.preventDefault(),u(null),c(""),s==="signin"){const{data:d,error:I}=await x.auth.signInWithPassword({email:i,password:r});if(I)u(I.message);else if(d.user){const{data:S}=await x.from("users").select("student_number").eq("id",d.user.id).single();S&&S.student_number?_("/dashboard"):_("/setup")}}else if(s==="signup"){const{error:d}=await x.auth.signUp({email:i,password:r});d?u(d.message):c("Signup successful! Check your email to confirm.")}else if(s==="forgot"){const{error:d}=await x.auth.resetPasswordForEmail(i,{redirectTo:"https://ninzargo.github.io/SignUpForm/#/"});d?u(d.message):c("Password reset email sent! Check your inbox.")}};return e.jsxs(W,{maxWidth:"false",sx:{width:"100vw",height:"100vh",position:"relative",display:"flex",justifyContent:"center",alignItems:"center",backgroundImage:`url(${w.imageUrl})`,backgroundSize:"cover",backgroundPosition:"center",transition:"background-image 1s ease-in-out"},children:[e.jsxs(p,{sx:{p:4,boxShadow:5,borderRadius:2,maxWidth:400,width:"100%",backgroundColor:"rgba(255, 255, 255, 0.95)",display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(p,{component:"img",src:se,alt:"Brunel Sailing Logo",sx:{height:80,width:80,mb:2,borderRadius:"50%"}}),e.jsx(y,{variant:"h4",gutterBottom:!0,children:s==="signup"?"Sign Up":s==="signin"?"Sign In":"Reset Password"}),l&&e.jsx(E,{severity:"error",children:l}),f&&e.jsx(E,{severity:"success",children:f}),e.jsxs("form",{onSubmit:L,children:[e.jsx(P,{fullWidth:!0,label:"Email",variant:"outlined",margin:"normal",value:i,onChange:m=>a(m.target.value),required:!0}),s!=="forgot"&&e.jsx(P,{fullWidth:!0,label:"Password",type:"password",variant:"outlined",margin:"normal",value:r,onChange:m=>o(m.target.value),required:!0}),e.jsx(j,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,sx:{mt:2},children:s==="signup"?"Sign Up":s==="signin"?"Sign In":"Send Reset Link"})]}),e.jsxs(y,{variant:"body2",sx:{mt:2},children:[s==="signin"&&e.jsxs(e.Fragment,{children:["Don't have an account? ",e.jsx(j,{variant:"text",onClick:()=>t("signup"),children:"Sign Up"}),e.jsx("br",{}),e.jsx(j,{variant:"text",onClick:()=>t("forgot"),children:"Forgot Password?"})]}),s==="signup"&&e.jsxs(e.Fragment,{children:[" Already have an account? ",e.jsx(j,{variant:"text",onClick:()=>t("signin"),children:"Sign In"})," "]}),s==="forgot"&&e.jsxs(e.Fragment,{children:[" Remembered your password? ",e.jsx(j,{variant:"text",onClick:()=>t("signin"),children:"Sign In"})," "]})]})]}),e.jsx(re,{photographerName:w.photographerName,photographerUrl:w.photographerUrl})]})},oe=n.lazy(()=>g(()=>import("./AccountSetup-CSNXvkwI.js"),__vite__mapDeps([0,1]))),ie=n.lazy(()=>g(()=>import("./EventList-B34eSMIV.js"),__vite__mapDeps([2,1]))),ae=n.lazy(()=>g(()=>import("./EventSignup-DOzZCGXq.js"),__vite__mapDeps([3,1]))),le=n.lazy(()=>g(()=>import("./MySignups-B6NQDuDQ.js"),__vite__mapDeps([4,1]))),ce=n.lazy(()=>g(()=>import("./ResetPassword-fD5brx0Z.js"),__vite__mapDeps([5,1]))),de=n.lazy(()=>g(()=>import("./AccessDenied-DRDU_P39.js"),__vite__mapDeps([6,1]))),ue=n.lazy(()=>g(()=>import("./AdminPage-1Vd9hze-.js"),__vite__mapDeps([7,1]))),pe=n.lazy(()=>g(()=>import("./ProtectedRoute-C52d-6Y4.js"),__vite__mapDeps([8,1])));function he(){const s=v();return n.useEffect(()=>{new URLSearchParams(window.location.hash.substring(1)).has("error_description")&&s("/access-denied");const{data:{subscription:i}}=x.auth.onAuthStateChange((a,r)=>{if(a==="PASSWORD_RECOVERY"){const o=window.location.origin+window.location.pathname;window.history.replaceState({},document.title,o),s("/update-password")}});return()=>{i.unsubscribe()}},[s]),e.jsxs(H,{children:[e.jsx(h,{path:"/",element:e.jsx(ne,{})}),e.jsx(h,{path:"/setup",element:e.jsx(oe,{})}),e.jsx(h,{path:"/update-password",element:e.jsx(ce,{})}),e.jsx(h,{path:"/access-denied",element:e.jsx(de,{})}),e.jsx(h,{path:"/Events",element:e.jsx(b,{children:e.jsx(ie,{})})}),e.jsx(h,{path:"/signup/:eventId",element:e.jsx(b,{children:e.jsx(ae,{})})}),e.jsx(h,{path:"/mysignups",element:e.jsx(b,{children:e.jsx(le,{})})}),e.jsx(h,{path:"/admin",element:e.jsx(pe,{children:e.jsx(b,{children:e.jsx(ue,{})})})})]})}function ge(){return e.jsxs(q,{children:[e.jsx($,{}),e.jsx(Q,{children:e.jsx(n.Suspense,{fallback:e.jsx(p,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:e.jsx(G,{})}),children:e.jsx(he,{})})})]})}Y.createRoot(document.getElementById("root")).render(e.jsx(n.StrictMode,{children:e.jsx(ge,{})}));export{te as f,x as s,X as u};
